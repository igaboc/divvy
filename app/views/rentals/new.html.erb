<h2>Rent <strong><%= @rental.listing.title %></strong></h2>

<%= form_with(model: [@rental.listing, @rental])  do |f| %>
  <%= f.hidden_field :listing_id %>

<div>
  <%= f.label :start_date %>
  <%= f.text_field :start_date, type: 'date' %>
</div>

<div>
  <%= f.label :end_date %>
  <%= f.text_field :end_date, type: 'date' %>
</div>

<div>
  <%= f.label "Required Deposit: " %>
  <%= number_to_currency(@rental.listing.deposit) %>
</div>

  <article>
    <% if flash[:error].present? %>
      <div id="error_explanation">
        <p><%= flash[:error] %></p>
      </div>
    <% end %>
    <label class="amount">
      <span>Price per day: <%= number_to_currency @rental.listing.rental_fee %></span>
    </label>
  </article>


  <script src="https://checkout.stripe.com/checkout.js" class="stripe-button"
          data-key="<%= Rails.configuration.stripe[:publishable_key] %>"
          data-description="<%= @rental.listing.title %>"
          data-email="<%= current_user.email %>"
          data-currency="aud"
          data-amount="<%= @amount %>"
          data-locale="auto"></script>
<% end %>
